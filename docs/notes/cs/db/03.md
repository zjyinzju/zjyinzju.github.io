# Chapter 3 Introduction to SQL

## Data Definition  
### Domain Types in SQL 

+ char(n): 定长字符串，长度为 n

!!! note 
    SQL 与 C 不同，SQL字符串结尾没有`\0` 

+ varchar(n): 变长字符串，最大长度为 n

+ int: 整数
+ smallint: 小整数
+ numeric(p, d): p 位数字，其中 d 位小数
+ real, double precision: 浮点数
+ float(n): 浮点数，精度为 n

### Built-in Data Types in SQL

+ date: 日期，例如：`date '2001-01-01'`
+ time: 时间，例如：`time '12:00:00'` `time '18:26:46.75'`
+ timestamp: 日期和时间，例如：`timestamp '2001-01-01 12:00:00'`
+ interval: 时间间隔，例如：`interval '2' day`
    + 可由 date, time, timestamp 相减得到
    + 可与 date, time, timestamp 相加
+ date, time functions: 
    + current_date(), current_time()
    + year(x), month(x), day(x), hour(x), minute(x), second(x)

### Create Table Construct

```sql
create table r(
    A1 D1,
    A2 D2,
    ...
    An Dn,
    (intergrity constraint1),
    (intergrity constraint2),
    ...
    (intergrity constraintn)
)
```

??? eg

    === "not null"
    ```sql
    create table instructor(
        ID char(5),
        name varchar(20) not null,
        dept_name varchar(20),
        salary numeric(8, 2)
    )
    ```
    not null: 该属性不能为空
    === "define key"
    ```sql
    create table instructor(
        ID char(5),
        name varchar(20) not null,
        dept_name varchar(20),
        salary numeric(8, 2),
        primary key(ID)
        foreign key(dept_name) references department
    )
    ```
    primary key 要求该属性是唯一的，且不能为空
    foreign key 要求该属性的值在另一个表中有对应
    === "default value"
    ```sql
    create table student(
        ID char(5),
        name varchar(20) not null,
        dept_name varchar(20),
        tot_cred numeric(3, 0) default 0
    )
    ```

!!! warning "foreign key"
    ```sql
    create table course(
        course_id varchar(8) primary key,
        title varchar(50),
        dept_name varchar(20),
        credits numeric(2, 0),
        foreign key(dept_name) references department(dept_name)
    );
    ```
    对于外键的删除和更新操作，为保证约束完整性，有下面几种方式：
    + set null: 将外键设置为 null
    + restrict: 禁止删除或更新
    + set default: 将外键设置为默认值
    + cascade: 删除或更新外键时，级联删除或更新
        + 级联可能会产生连锁反应，将整张表都删空



## Basic Query Structure

## Additional Basic Operations

## Set Operations

## Null Values

## Aggregate Functions

## Nested Subqueries

## Modification of the Database